<div class="ide-loader" layout="column" layout-align="center center">
  <che-loader layout="column" layout-align="center center">
    <!--crane and terminals-->
    <div class="che-loader-animation-panel main-page" layout="row" flex="">
      <div layout="column"
           hide-xs hide-sm
           layout-align="end start">
        <che-loader-crane che-all-steps="ideLoaderCtrl.getSteps()"
                          che-exclude-steps="[ideLoaderCtrl.getSteps().length-1]"
                          che-step="{{ideLoaderCtrl.getCurrentStep()}}"
                          che-switch-on-iteration="true">
        </che-loader-crane>
      </div>
      <div layout="column"
           layout-align="center center"
           flex="auto">
        <div class="ide-loader-working-log">
          <che-accordion ng-repeat="step in ideLoaderCtrl.getSteps()" che-index="{{$index}}"
                         che-current-step="{{ideLoaderCtrl.getCurrentStep()}}">
            <div class="che-accordion-title">
              <span>{{ideLoaderCtrl.getSteps()[$index].text}}{{$index < ideLoaderCtrl.getCurrentStep() ? ' ... completed' : ''}}</span>
            </div>
            <div class="che-accordion-body" ng-show="$index>0 && $index<ideLoaderCtrl.getSteps().length-1">
              <che-logs-output che-title="{{ideLoaderCtrl.getSteps()[$index].inProgressText}}"
                               che-text="{{ideLoaderCtrl.getSteps()[$index].logs}}"></che-logs-output>
            </div>
          </che-accordion>
        </div>
      </div>
    </div>
    <!--bottom bar-->
    <div class="che-loader-bottom-bar" flex="none">
      <div layout="row" layout-align="center stretch" class="main-page">
        <div flex="50" layout="column" layout-align="end start">
          <che-link ng-click="ideLoaderCtrl.cancelLoad()" che-link-text="&larr; Back to dashboard"
                    class="ide-loader-back-link"></che-link>
        </div>
        <div flex="50" layout="column" layout-align="end end">
          <che-link ng-click="ideLoaderCtrl.downloadLogs()" che-link-text="Problem? download logs"
                    ng-show="ideLoaderCtrl.getSteps()[ideLoaderCtrl.getCurrentStep()].hasError"
                    class="ide-loader-download-link"></che-link>
        </div>
      </div>
    </div>
  </che-loader>

  <div layout="row" layout-align="center center" flex="none"><img class="ide-loader-logo" src="{{branding.favicon}}"/></div>
</div>
